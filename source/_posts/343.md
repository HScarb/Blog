---
title: Jmeter 使用指南
author: Scarb
postid: 343
posttype: post
categories: exp
toc: true
date: 2019-02-12 11:07:47
updated: 2019-02-12 11:07:47
nicename:
tags:
    - java
    - jmeter
    - testing
---

>本文由Scarb发表于[金甲虫的博客](http://47.106.131.90/blog)，转载请注明出处

# Jmeter 使用指南

　　Apache JMeter是Apache组织开发的基于Java的压力测试工具。用于对软件做压力测试，它最初被设计用于Web应用测试，但后来扩展到其他测试领域。 它可以用于测试静态和动态资源，例如静态文件、Java 小服务程序、CGI 脚本、Java 对象、数据库、FTP 服务器， 等等。JMeter 可以用于对服务器、网络或对象模拟巨大的负载，来自不同压力类别下测试它们的强度和分析整体性能。另外，JMeter能够对应用程序做功能/回归测试，通过创建带有断言的脚本来验证你的程序返回了你期望的结果。为了最大限度的灵活性，JMeter允许使用正则表达式创建断言。
Apache jmeter 可以用于对静态的和动态的资源（文件，Servlet，Perl脚本，java 对象，数据库和查询，FTP服务器等等）的性能进行测试。它可以用于对服务器、网络或对象模拟繁重的负载来测试它们的强度或分析不同压力类型下的整体性能。你可以使用它做性能的图形分析或在大并发负载测试你的服务器/脚本/对象。

## 1. 安装和运行

### 1.1 安装

使用Jmeter之前首先需要[安装Java](http://www.testclass.net/selenium_java/install-java/)环境。下载jdk进行安装。
之后去Jmeter官网下载jmeter的tgz包，然后解压即可。
[官网下载地址](http://jmeter.apache.org/download_jmeter.cgi)

### 1.2 运行

在Jmeter根目录的bin目录下有一些jmeter的运行文件。他们的用处如下。

- jmeter.bat
run JMeter (in GUI mode by default)
- jmeterw.cmd
run JMeter without the windows shell console (in GUI mode by default)
- jmeter-n.cmd
drop a JMX file on this to run a non-GUI test
- jmeter-n-r.cmd
drop a JMX file on this to run a non-GUI test remotely
- jmeter-t.cmd
drop a JMX file on this to load it in GUI mode
- jmeter-server.bat
start JMeter in server mode
- mirror-server.cmd
runs the JMeter Mirror Server in non-GUI mode
- shutdown.cmd
Run the Shutdown client to stop a non-GUI instance gracefully
- stoptest.cmd
Run the Shutdown client to stop a non-GUI instance abruptly

#### 1.2.1 界面运行

在Windows下，打开Jmeter根目录的`bin\jmeter.bat`，可以打开图形界面。
在Linux下运行`$ sh bin/jmeter.sh`可以打开图形界面。

另一种方法是用`java -jar`的方式运行
`java -jar bin/ApacheJMeter.jar`

#### 1.2.2 无界面运行

Jmeter可以无界面后台运行一个测试文件，并指定参数。
首先将测试配置文件保存为一个`jmx`文件，然后用命令行启动。

jmeter支持一些选项。

- -n
让Jmeter在无界面模式运行。
- -t
后面跟jmx文件名，指定运行的jmx文件。
- -l
[name of JTL file to log sample results to].
- -j
[name of JMeter run log file].
- -r
Run the test in the servers specified by the JMeter property "remote_hosts"
- -R
[list of remote servers] Run the test in the specified remote servers
- -g
[path to CSV file] generate report dashboard only
- -e
generate report dashboard after load test
- -o
output folder where to generate the report dashboard after load test. Folder must not exist or be empty
The script also lets you specify the optional firewall/proxy server information:

- -H
代理的hostname
- -P
代理的端口号

运行命令举例：

```shell
$ jmeter -n -t my_test.jmx -l log.jtl -H my.proxy.server -P 8000
```

### 1.2.3 服务模式

[Server Mode](http://jmeter.apache.org/usermanual/get-started.html#server)

## 2. 基本元素和使用

### 2.2. 函数

## 3. BeanShell

## 4. 参考资料

1. [JMeter User's Manual](http://jmeter.apache.org/usermanual/index.html)
2. [Jmeter性能测试文档翻译](http://www.testclass.net/jmeter)
3. [Jmeter（一）简介以及环境搭建](https://www.cnblogs.com/richered/p/8324039.html)
4. [性能测试工具 JMeter 入门基础](https://zhuanlan.zhihu.com/p/33683980)